{ "name": "shipping-rates",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "shipping-rates-spi-index.js" },
  "docs":
    { "summary": "The Shipping Rates SPI.",
      "description":
        [ "Intro___",
          "",
          " Learn more about the [Shipping Rates custom integration](https://support.wix.com/en/article/velo-shipping-rates-spi)." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "getShippingRates",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "items",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "shipping-rates-spi.Item" ] },
              "doc": "All items to be shipped.",
              "optional": true },
            { "name": "options",
              "type": "shipping-rates-spi.Options",
              "doc": "Shipping origin, shipping destination, and general configurations.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ { "name": "Array",
                      "typeParams":
                        [ "shipping-rates-spi.ShippingRate" ] } ] },
            "doc": "Fulfilled - Available shipping rates." },
        "locations":
          [ { "lineno": 1,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "summary": "Retrieves relevant shipping rates provided by integrated shipping providers.",
            "description":
              [ "This endpoint is called by Wix Stores to retrieve the shipping rates provided by your integration.",
                "",
                "> **Note:** The `items` and `options` params are provided by the cart. However, you may add to them if, for example, you want to integrate with a shipping provider that requires information not already provided." ],
            "links": [],
            "examples":
              [ { "title": "Minimum returned fields for `shippingRates` array",
                  "body":
                    [ "export const getShippingRates = (items, options) => {",
                      "",
                      "  return {",
                      "    \"shippingRates\": [{",
                      "      \"code\": \"usps-international\",",
                      "      \"title\": \"USPS - International\",",
                      "      \"cost\": {",
                      "        \"price\": \"15\",",
                      "        \"currency\": \"USD\",",
                      "        \"additionalCharges\": [{",
                      "          \"price\": \"10\",",
                      "          \"type\": \"HANDLING_FEE\",",
                      "          \"details\": \"Handling fee of $5 applied for fragile items.\"",
                      "        }]",
                      "      },",
                      "      \"logistics\": {",
                      "        \"deliveryTime\": \"2-5 days\"",
                      "      }",
                      "    }]",
                      "  };",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Return shipping rates based on quantity of items in cart",
                  "body":
                    [ "export const getShippingRates = (items, options) => {",
                      "  return getShippingRatesByQuantity(items, options.currency)",
                      "}",
                      "",
                      "// Tally the quantity of all items",
                      "function calculateTotalCartQuantity(items) {",
                      "  return items.reduce((acc, item) => acc += item.quantity, 0);",
                      "}",
                      "",
                      "// Return shipping rates based on the calculated items' quantity",
                      "function getShippingRatesByQuantity(items, currency) {",
                      "  const cartQuantity = calculateTotalCartQuantity(items);",
                      "",
                      "  if (cartQuantity >= 3) {",
                      "    return {",
                      "      shippingRates: [{",
                      "        code: 'quantity_more_3',",
                      "        title: 'Quantity > 3',",
                      "        logistics: {",
                      "          deliveryTime: '3-5 Days'",
                      "        },",
                      "        cost: {",
                      "          price: '10.00',",
                      "          // Currency value is taken from provided options object",
                      "          currency: currency",
                      "        }",
                      "      }]",
                      "    };",
                      "  };",
                      "",
                      "  // If cartQuantity is less than 3, the following shipping rate is returned",
                      "  return {",
                      "    shippingRates: [{",
                      "      code: 'quantity_more_1',",
                      "      title: '1 Item',",
                      "      logistics: {",
                      "        deliveryTime: '3-5 Days'",
                      "      },",
                      "      cost: {",
                      "        price: '20.00',",
                      "        // Currency value is taken from provided options object",
                      "        currency: currency",
                      "      }",
                      "    }]",
                      "  };",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Example of `spi-integration-config.js` file",
                  "body":
                    [ "export function getConfig() {",
                      "  return {",
                      "    \"name\": \"East-Coast Shipping Provider\",",
                      "  };",
                      "};" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages": [],
  "extra":
    {  } }